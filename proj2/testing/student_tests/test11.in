# 包含定义文件
I definitions.inc

# 初始化仓库
> init
<<<

# 在主分支上提交一个文件
+ master-file.txt wug.txt
> add master-file.txt
<<<
> commit "master commit 1"
<<<

# 创建并切换到新分支
> branch branch1
<<<
> checkout branch1
<<<

# 在branch1上提交一个文件
+ branch1-file.txt notwug.txt
> add branch1-file.txt
<<<
> commit "branch1 commit"
<<<

# 切换回主分支并提交另一个文件
> checkout master
<<<
+ master-file2.txt notwug.txt
> add master-file2.txt
<<<
> commit "master commit 2"
<<<

# 合并branch1到master
> merge branch1
<<<

# 检查状态
> status
=== Branches ===
*master
branch1

=== Staged Files ===

=== Removed Files ===

=== Modifications Not Staged For Commit ===

=== Untracked Files ===

<<<

# 确认所有文件都存在
E master-file.txt
E master-file2.txt
E branch1-file.txt

# 检查日志
> log
===
${COMMIT_HEAD}
Merged branch1 into master.

===
${COMMIT_HEAD}
master commit 2

===
${COMMIT_HEAD}
master commit 1

===
${COMMIT_HEAD}
initial commit

<<<*

# 测试合并冲突
# 创建新分支
> branch branch2
<<<
> checkout branch2
<<<

# 在branch2上修改master-file.txt
+ master-file.txt notwug.txt
> add master-file.txt
<<<
> commit "branch2 changed master-file"
<<<

# 切换回master并修改同一文件
> checkout master
<<<
+ master-file.txt wug.txt
> add master-file.txt
<<<
> commit "master changed master-file"
<<<

# 合并应该产生冲突
> merge branch2
Encountered a merge conflict.
<<<

# 测试合并不存在的分支(应该失败)
> merge nonexistent-branch
A branch with that name does not exist.
<<<

# 测试合并当前分支(应该失败)
> merge master
Cannot merge a branch with itself.
<<<

# 测试有未提交更改时合并(应该失败)
+ new-file.txt wug.txt
> add new-file.txt
<<<
> merge branch1
You have uncommitted changes.
<<<