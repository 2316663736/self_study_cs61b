# 包含定义文件
I definitions.inc

# 初始化仓库
> init
<<<

# 创建一系列提交
+ file1.txt wug.txt
> add file1.txt
<<<
> commit "commit 1"
<<<

+ file2.txt notwug.txt
> add file2.txt
<<<
> commit "commit 2"
<<<

+ file3.txt wug.txt
> add file3.txt
<<<
> commit "commit 3"
<<<

# 获取日志以获取提交ID
> log
===
${COMMIT_HEAD}
commit 3

===
${COMMIT_HEAD}
commit 2

===
${COMMIT_HEAD}
commit 1

===
${COMMIT_HEAD}
initial commit

<<<*

# 保存提交ID
D COMMIT2_ID "${2}"
D COMMIT1_ID "${3}"

# 测试重置到commit 1
> reset ${COMMIT1_ID}
<<<

# 确认file2.txt和file3.txt不存在
* file2.txt
* file3.txt
E file1.txt

# 确认日志正确
> log
===
${COMMIT_HEAD}
commit 1

===
${COMMIT_HEAD}
initial commit

<<<*

# 测试重置到不存在的提交(应该失败)
> reset 0123456789abcdef0123456789abcdef01234567
No commit with that id exists.
<<<

# 创建未跟踪文件
+ untracked.txt notwug.txt

# 测试重置时有未跟踪文件会被覆盖(应该失败)
> reset ${COMMIT2_ID}
There is an untracked file in the way; delete it, or add and commit it first.
<<<